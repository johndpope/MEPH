var $array=Array;MEPH.define("MEPH.util.Array",{alternateNames:["MEPHArray"],statics:{isArray:function(){$array.isArray.apply(null,arguments)},$create:function(b,a){if(b instanceof Float32Array){return new Float32Array(a)}if(b instanceof Float64Array){return new Float64Array(a)}return[]},create:function(d,b){d=d||[];if(window.appliedToAllArrays&&Array.isArray(d)){return d}if(!d.where){Object.defineProperty(d,"where",{enumerable:false,writable:true,configurable:true,value:function(g){var e=MEPH.util.Array.create();var h=this;if(g===undefined){g=function(i){return i}}for(var f=0;f<h.length;f++){if(g(h[f],f)){e.push(h[f])}}return e}})}if(!d.orderBy){Object.defineProperty(d,"orderBy",{enumerable:false,writable:true,configurable:true,value:function(e){var f=this.select(function(g){return g});return f.sort(e)}})}if(!d.argsort){Object.defineProperty(d,"argsort",{enumerable:false,writable:true,configurable:true,value:function(f){var g=this.select(function(h){return{d:h}});var e=g.sort(function(h,i){return f(h.d,i.d)});return e.select(function(h){return g.indexOf(h)})}})}if(!d.maxSelection){Object.defineProperty(d,"maxSelection",{enumerable:false,writable:true,configurable:true,value:function(h){var e=null;var g=null;var j=this;for(var f=0;f<j.length;f++){if(e==null||h(j[f])>e){e=h(j[f]);g=j[f]}}return g}})}if(!d.zeroes){Object.defineProperty(d,"zeroes",{enumerable:false,writable:true,configurable:true,value:function(e){return[].interpolate(0,e,function(){return 0})}})}if(!d.maximum){Object.defineProperty(d,"maximum",{enumerable:false,writable:true,configurable:true,value:function(h){var e=null;var g=null;var j=this;h=h||function(i){return i};for(var f=0;f<j.length;f++){if(e==null||h(j[f])>e){e=h(j[f]);g=j[f]}}return e}})}if(!d.intersection){Object.defineProperty(d,"intersection",{enumerable:false,writable:true,configurable:true,value:function(h,k){var l=this;var e=[];k=k||function(i,j){return i===j};for(var g=l.length;g--;){for(var f=h.length;f--;){if((k(h[f],l[g]))){e.push(l[g]);break}}}return e}})}if(!d.intersectFluent){Object.defineProperty(d,"intersectFluent",{enumerable:false,writable:true,configurable:true,value:function(f){var g=this;var e=[];f=f||function(h,i){return h===i};e.push.apply(e,g[0]);g=g.subset(1);g.foreach(function(h){e=e.intersection(h,f)});return e}})}if(!d.count){Object.defineProperty(d,"count",{enumerable:false,writable:true,configurable:true,value:function(e){e=e||function(){return true};return this.where(e).length}})}if(!d.trim){Object.defineProperty(d,"trim",{enumerable:false,writable:true,configurable:true,value:function(){var e=[];var g=this;for(var f=0;f<g.length;f++){e.push(g[f].trim())}return e}})}if(!d.indexWhere){Object.defineProperty(d,"indexWhere",{enumerable:false,writable:true,configurable:true,value:function(g){var e=[];var h=this;for(var f=0;f<h.length;f++){if(g(h[f],f)){e.push(f)}}return e}})}if(!d.relativeCompliment){var a={enumerable:false,writable:true,configurable:true,value:function(g,h){var j=this;var e=[];h=h||function(i,k){return i===k};for(var f=j.length;f--;){if(g.count(h.bind(window,j[f]))==0){e.push(j[f])}}return e}};if(!d.relativeCompliment){Object.defineProperty(d,"relativeCompliment",a)}}if(!d.random){Object.defineProperty(d,"random",{enumerable:false,writable:true,configurable:true,value:function(){var e=[];var g=this;for(var f=0;f<g.length;f++){e.splice(Math.floor(Math.random(0)*e.length),0,(g[f]))}return e}})}if(!d.all){Object.defineProperty(d,"all",{enumerable:false,writable:true,configurable:true,value:function(f){var g=this;for(var e=0;e<g.length;e++){if(!f(g[e],e)){return false}}return true}})}if(!d.removeWhere){Object.defineProperty(d,"removeWhere",{enumerable:false,writable:true,configurable:true,value:function(g){var h=this;g=g||function(){return true};var e=h.where(g);for(var f=0;f<e.length;f++){h.splice(h.indexOf(e[f]),1)}return e}})}if(!d.clear){Object.defineProperty(d,"clear",{enumerable:false,writable:true,configurable:true,value:function(e){var f=this;return f.removeWhere(function(g){return true})}})}if(!d.removeFirstWhere){Object.defineProperty(d,"removeFirstWhere",{enumerable:false,writable:true,configurable:true,value:function(g){var h=this;var e=h.where(g);for(var f=0;f<Math.min(e.length,1);f++){h.splice(h.indexOf(e[f]),1)}return e}})}if(!d.remove){Object.defineProperty(d,"remove",{enumerable:false,writable:true,configurable:true,value:function(h,g){var f=this,e=f.slice((g||h)+1||f.length);f.length=h<0?f.length+h:h;return f.push.apply(f,e)}})}if(!d.removeIndices){Object.defineProperty(d,"removeIndices",{enumerable:false,writable:true,configurable:true,value:function(f){f=f.orderBy(function(g,h){return h-g});var e=this;f.foreach(function(g){e.splice(g,1)});return e}})}if(!d.max){Object.defineProperty(d,"max",{enumerable:false,writable:true,configurable:true,value:function(h){var e=null,g=null;h=h||function(i){return i};var j=this;for(var f=0;f<j.length;f++){if(g==null||h(j[f])>g){e=(j[f]);g=h(j[f])}}return e}})}if(!d.foreach){Object.defineProperty(d,"foreach",{enumerable:false,writable:true,configurable:true,value:function(f){var g=this;for(var e=0;e<g.length;e++){f(g[e],e)}return this}})}if(!d.select){Object.defineProperty(d,"select",{enumerable:false,writable:true,configurable:true,value:function(g){var e=MEPH.util.Array.$create(this,this.length);g=g||function(i){return i};var h=this;for(var f=0;f<h.length;f++){if(this instanceof Float32Array){e[f]=g(h[f],f)}else{e.push(g(h[f],f))}}return e}})}if(!d.contains){Object.defineProperty(d,"contains",{enumerable:false,writable:true,configurable:true,value:function(e){return this.first(e)!=null}})}if(!d.first){Object.defineProperty(d,"first",{enumerable:false,writable:true,configurable:true,value:function(g){var h=this.select(function(i){return i});g=g||function(){return true};if(typeof(g)!=="function"){var e=g;g=function(i){return e===i}}for(var f=0;f<h.length;f++){if(g(h[f],f)){return(h[f])}}return null}})}if(!d.any){Object.defineProperty(d,"any",{enumerable:false,writable:true,configurable:true,value:function(e){return this.select(function(f){return f}).first(e)!==null}})}if(!d.firstIndex){Object.defineProperty(d,"firstIndex",{enumerable:false,writable:true,configurable:true,value:function(g){var h=this.select(function(i){return i});g=g||function(){return true};if(typeof(g)!=="function"){var e=g;g=function(i){return e===i}}for(var f=0;f<h.length;f++){if(g(h[f],f)){return f}}return -1}})}if(!d.lastIndex){Object.defineProperty(d,"lastIndex",{enumerable:false,writable:true,configurable:true,value:function(g){var h=this.select(function(i){return i});g=g||function(){return true};if(typeof(g)!=="function"){var e=g;g=function(i){return e===i}}for(var f=h.length;f--;){if(g(h[f],f)){return f}}return -1}})}if(!d.selectFirst){Object.defineProperty(d,"selectFirst",{enumerable:false,writable:true,configurable:true,value:function(g){var h=this.select(function(i){return i});g=g||function(){return true};if(typeof(g)!=="function"){var e=g;g=function(i){return e===i}}for(var f=0;f<h.length;f++){if(g(h[f])){return g(h[f])}}return null}})}if(!d.last){Object.defineProperty(d,"last",{enumerable:false,writable:true,configurable:true,value:function(h){h=h||function(){return true};if(typeof(h)!=="function"){var f=h;h=function(i){return f===i}}var j=MEPH.Array(this.select(function(i){return i}).reverse());for(var g=0;g<j.length;g++){if(h(j[g])){var e=(j[g]);return e}}return null}})}if(!d.skipEvery){Object.defineProperty(d,"skipEvery",{enumerable:false,writable:true,configurable:true,value:function(h,g){var j=this;var f=this instanceof Float32Array?new Float32Array(Math.ceil(j.length/h)):[];h=Math.abs(h);var k=0;g=g||function(i){return i};for(var e=0;e<j.length;e=e+h){if(f instanceof Float32Array){f[k]=j[e]}else{f.push(j[e])}k++}return f}})}if(!d.step){Object.defineProperty(d,"step",{enumerable:false,writable:true,configurable:true,value:function(g,f){var h=this;g=Math.abs(g);f=f||function(i){return i};for(var e=0;e<h.length;e=e+g){f(h[e],e)}return this}})}if(!d.skipEveryFromTo){Object.defineProperty(d,"skipEveryFromTo",{enumerable:false,writable:true,configurable:true,value:function(n,e,m,f){var h=this;var j=Math.ceil((m-e)/n);var k=this instanceof Float32Array?new Float32Array(Math.max(0,Math.ceil(j))):[];n=Math.abs(n);var l=0;f=f||function(i){return i};for(var g=e;g<m;g=g+n){if(k instanceof Float32Array){k[l]=h[g]}else{k.push(h[g])}l++}return k}})}if(!d.normalize){Object.defineProperty(d,"normalize",{enumerable:false,writable:true,configurable:true,value:function(){var f=this;var e=f.summation(function(h,g){return h+g});f=f.select(function(g){return g/e});return f}})}if(!d.fftshift){Object.defineProperty(d,"fftshift",{enumerable:false,writable:true,configurable:true,value:function(){var h=this;var f=MEPHArray.$create(h,h.length);var g=Math.floor((h.length+1)/2);var j=Math.floor(h.length/2);for(var e=0;e<g;e++){f[e]=h[e+j]}for(var e=0;e<j;e++){f[e+g]=h[e]}return f}})}if(!d.interpolate){Object.defineProperty(d,"interpolate",{enumerable:false,writable:true,configurable:true,value:function(j,f,g){var h=this;g=g||function(i){return i};for(var e=j;e<f;e++){if(h instanceof Float32Array){h[e-j]=(g(e))}else{h.push(g(e,e-j))}}return h}})}if(!d.groupBy){Object.defineProperty(d,"groupBy",{enumerable:false,writable:true,configurable:true,value:function(h){var j=this;var e={};for(var g=0;g<j.length;g++){var f=h(j[g]);e[f]=e[f]||[];e[f].push(j[g])}return e}})}if(!d.mostcommon){Object.defineProperty(d,"mostcommon",{enumerable:false,writable:true,configurable:true,value:function(h){var j=this;var g=j.groupBy(h);var e;for(var f in g){if(e===undefined){e=f}else{if(g[e].length<g[f].length){e=f}}}return e}})}if(!d.second){Object.defineProperty(d,"second",{enumerable:false,writable:true,configurable:true,value:function(g){var h=this.select(function(i){return i});var e=0;g=g||function(){return true};for(var f=0;f<h.length;f++){if(g(h[f])){e++}if(e==2){return(h[f])}}return null}})}if(!d.min){Object.defineProperty(d,"min",{enumerable:false,writable:true,configurable:true,value:function(g){var e=null;var h=this;g=g||function(i){return i};for(var f=0;f<h.length;f++){if(e==null||g(h[f])<e){e=g(h[f])}}return e}})}if(!d.closestAbs){Object.defineProperty(d,"closestAbs",{enumerable:false,writable:true,configurable:true,value:function(m,j){var f=null;var k=null;var l=this;j=j||function(i){return i};for(var h=0;h<l.length;h++){var e=j(l[h]);var g;if(Math.abs(m)>Math.abs(e)){g=Math.abs(m)-Math.abs(e)}else{g=Math.abs(e)-Math.abs(m)}if(f===null){k=g;f=h}if(k===0){return h}else{if(k>g){k=g;f=h}}}return f}})}if(!d.nth){Object.defineProperty(d,"nth",{enumerable:false,writable:true,configurable:true,value:function(h,g){var j=this.select(function(i){return i});var e=0;g=g||function(){return true};for(var f=0;f<j.length;f++){if(g(j[f])){e++}if(e==h){return(j[f])}}return null}})}if(!d.unique){Object.defineProperty(d,"unique",{enumerable:false,writable:true,configurable:true,value:function(h){var e=MEPH.util.Array.create();var f=MEPH.util.Array.create();h=h||function(i){return i};var j=this;for(var g=0;g<j.length;g++){if(e.indexOf(h(j[g]))===-1){e.push(h(j[g]));f.push(j[g])}}return f}})}if(!d.summation){Object.defineProperty(d,"summation",{enumerable:false,writable:true,configurable:true,value:function(g){var e=0;var h=this;for(var f=0;f<h.length;f++){e=g(h[f],e,f)}return e}})}if(!d.addition){Object.defineProperty(d,"addition",{enumerable:false,writable:true,configurable:true,value:function(g){var e=0;var h=this;g=g||function(i){return i};for(var f=0;f<h.length;f++){e+=g(h[f],f)}return e}})}var c=function(g,f,e){if(g instanceof Float32Array||g instanceof Float64Array){g[e]=f}else{g.push(f)}};if(!d.cumsum){Object.defineProperty(d,"cumsum",{enumerable:false,writable:true,configurable:true,value:function(h){var e=MEPHArray.$create(this,this.length);var g=0;h=h||function(i){return i};var j=this;for(var f=0;f<j.length;f++){g+=h(j[f]);c(e,g,f)}return e}})}if(!d.sum){Object.defineProperty(d,"sum",{enumerable:false,writable:true,configurable:true,value:function(g){var e=0;var h=this;for(var f=0;f<h.length;f++){e+=g(h[f],f)}return e}})}if(!d.minSelect){Object.defineProperty(d,"minSelect",{enumerable:false,writable:true,configurable:true,value:function(h){var e=null;var g=null;var j=this;h=h||function(i){return i};for(var f=0;f<j.length;f++){if(e==null||h(j[f])<e){e=h(j[f]);g=j[f]}}return g}})}if(!d.minSelectIndex){Object.defineProperty(d,"minSelectIndex",{enumerable:false,writable:true,configurable:true,value:function(h){var e=null;var g=null;var j=this;h=h||function(i){return i};for(var f=0;f<j.length;f++){if(e==null||h(j[f])<e){e=h(j[f]);g=f}}return g}})}if(!d.concatFluentReverse){Object.defineProperty(d,"concatFluentReverse",{enumerable:false,writable:true,configurable:true,value:function(g){var h=this;var e=MEPH.util.Array.create();for(var f=h.length;f--;){e=MEPH.util.Array.create(e.concat(g(h[f],f)))}return e}})}if(!d.concatFluent){Object.defineProperty(d,"concatFluent",{enumerable:false,writable:true,configurable:true,value:function(m){var n=this,l=0;n.foreach(function(i){l+=i.length});var f=this instanceof Float32Array?new Float32Array(l):[];if(this instanceof Float32Array){var e=n.length;for(var k=0;k<n.length;k++){var h=m(n[k],k);for(var g=0;g<n[k].length;k++){f[k*e+g]=n[k][g]}}}else{for(var k=0;k<n.length;k++){f=MEPH.util.Array.create(f.concat(m(n[k],k)))}}return f}})}if(!d.subset){Object.defineProperty(d,"subset",{enumerable:false,writable:true,configurable:true,value:function(j,g){var h=this;g=Math.min(h.length,g===undefined||g===null?h.length:g);j=Math.min(h.length,j===undefined||j===null?h.length:j);j=j<0?0:j;g=g<0?0:g;var e=this instanceof Float32Array?new Float32Array(g-j):[];for(var f=j;f<g;f++){if(this instanceof Float32Array){e[f-j]=h[f]}else{e.push(h[f])}}return MEPH.util.Array.create(e)}})}if(!d.subeach){Object.defineProperty(d,"subeach",{enumerable:false,writable:true,configurable:true,value:function(j,f,g){var h=this;f=Math.min(h.length,f===undefined||f===null?h.length:f);j=Math.min(h.length,j===undefined||j===null?h.length:j);j=j<0?0:j;f=f<0?0:f;for(var e=j;e<f;e++){g(h[e])}return h}})}if(!d.window){Object.defineProperty(d,"window",{enumerable:false,writable:true,configurable:true,value:function(k,g,h){var j=this;g=Math.min(j.length,g===undefined||g===null?j.length:g);var e=this instanceof Float32Array?new Float32Array(g-k):[];for(var f=k;f<g;f++){c(e,j[f]*h(f-k,g),f-k)}return MEPH.util.Array.create(e)}})}if(b){window.appliedToAllArrays=true}return d},convert:function(b){var c=MEPH.util.Array.create(),a;for(a=0;a<b.length;a++){c.push(b[a])}return c},convertObject:function(c){var b,a=[];if(Array.isArray(c)){return MEPH.Array(c)}for(b in c){a.push(c[b])}return a}}}).then(function(){MEPH.util.Array.create(Array.prototype,true);if(Float32Array){MEPH.util.Array.create(Float32Array.prototype,true)}if(Float64Array){MEPH.util.Array.create(Float64Array.prototype,true)}});