MEPH.define("MEPH.graph.GraphControl",{alias:"graph",templates:true,requires:["MEPH.graph.GraphViewPort","MEPH.graph.Graph","MEPH.graph.ConnectionHandler","MEPH.graph.renderer.ConnectionRenderer","MEPH.graph.renderer.BlenderNode","MEPH.graph.GraphRenderer"],extend:"MEPH.control.Control",properties:{id:null},initialize:function(){var a=this;a.graph=a.graph||new MEPH.graph.Graph();a.callParent.apply(a,arguments)},onLoaded:function(){var a=this;a.id="graph"+MEPH.GUID();a.querySelectorAll("div.graphBody").first().parentNode.setAttribute("id",a.id);setTimeout(function(){MEPH.graph.GraphControl.create(a.graph||new MEPH.graph.Graph(),null,"#"+a.id+" div.graphBody","#"+a.id)},10)},addNode:function(b){var a=this;a.graph.addNode(b)},getNodes:function(){var a=this;return a.graph.getNodes()},statics:{create:function(g,i,b,d){b=b||"body";var e=new MEPH.graph.GraphViewPort();var f=new MEPH.graph.GraphRenderer();var h=new MEPH.graph.renderer.ConnectionRenderer();var c=new MEPH.graph.renderer.BlenderNode(e);var a=new MEPH.graph.ConnectionHandler();a.setGraph(g);e.setConnectionHandler(a);e.setup(b,i);f.setNodeRenderer(c);f.setConnectionRenderer(h);f.setGraph(g);f.setViewPort(e);f.use("viewport");e.setGraph(g);f.render();if(d&&document.querySelector(d)){e.setHolder(d);e.resize();window.addEventListener("resize",function(){e.resize()})}e.selectConnectionOnClick=true;return e}}});