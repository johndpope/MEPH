MEPH.define("MEPH.tween.Calculator",{requires:["MEPH.math.Util","MEPH.math.Vector"],statics:{BezierCubic:function(a,j,h,g,i){var e=Math.pow(1-i,3);var d=3*Math.pow(1-i,2)*i;var c=3*Math.pow(1-i,2)*Math.pow(i,2);var b=Math.pow(i,3);var f=new MEPH.math.Vector([e*a.x+d*j.x+c*h.x+b*g.x,e*a.y+d*j.y+c*h.y+b*g.y]);return f},Linear:function(d,c,a){var b=MEPH.math.Vector.Lerp2D(d,c,a);return b}},properties:{tweendata:null},setData:function(b){var a=this;a.tweendata=b},get:function(k){var e=this;var l=e.tweendata.first(function(m){return m});var c=l.x.firstIndex(function(m){return m>k});if(c===-1){if(k===l.x.last()){c=l.x.length-1}else{throw new Error("not in defined range: Calculator.js")}}c--;var a=l.segments?l.segments.first(function(m){return m.segment===c}):null;var j=new Vector([l.x.nth(c+1),l.y.nth(c+1)]);var i=new Vector([l.x.nth(c+2),l.y.nth(c+2)]);var b=k<l.x.nth(c+1)?k-l.x.nth(c+1):k;var h=l.x.nth(c+2);if(h){b=b/h}if(a){var g=new Vector([a.startpos.x,a.startpos.y]);var f=new Vector([a.startpos.x,a.startpos.y]);var d=MEPH.tween.Calculator.BezierCubic(j,g,f,i,b);return d.y}else{var d=MEPH.tween.Calculator.Linear(j,i,b);return d.y}}});