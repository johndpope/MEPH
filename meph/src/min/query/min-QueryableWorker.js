MEPH.define("MEPH.query.QueryableWorker",{properties:{$worker:null,$promise:null},initialize:function(){var a=this;a.$worker=new Worker(MEPH.frameWorkPathSource);var b=" var t=  mephFrameWork('MEPH', \""+MEPH.frameWorkPath+'",null, self); t.framework.ready().then(function(){ MEPH.setPath("'+MEPH.frameWorkPath+'","MEPH");postMessage({ "success": true });});';a.$promise=Promise.resolve().then(function(){return a.post({func:"start",src:b,framework:"MEPH"}).then(function(){})})},ready:function(){var a=this;return a.$promise.then(function(){return a})},post:function(d){var c=this,b,a,e=new Promise(function(g,h){b=g;a=h});return Promise.resolve().then(function(){var f=function(g){c.$worker.removeEventListener(f);b(g.data)};c.$worker.addEventListener("message",f,false);c.$worker.postMessage(d);return e})},terminate:function(){var a=this;a.$worker.terminate();a.$worker=null},message:function(d,a,b){var c=this;if(!b){throw new Error("There must be a handler")}c.$worker.addEventListener("message",b,false);c.$worker.postMessage({work:d.toString(),args:a,func:"exec"})},postSync:function(c,d){var b=this;var a=function(e){b.$worker.removeEventListener(a);d(e.data)};b.$worker.addEventListener("message",a,false);b.$worker.postMessage(c)},executeSync:function(b,a,c){me.postSync({work:b.toString(),args:a,func:"exec"},c)},execute:function(c,a){var b=this;b.$promise=b.$promise.then(function(){return b.post({work:c.toString(),args:a,func:"exec"})});return b.$promise},load:function(a){var b=this;b.$promise=b.$promise.then(function(){return b.post({func:"load",script:a,framework:"MEPH"}).then(function(c){b.loaded=true;return c})});return b.$promise}});