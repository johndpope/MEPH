MEPH.define("MEPH.audio.sbsms.TrackPoint",{requires:["MEPH.audio.sbsms.Util"],statics:{TrackPointNoCont:65535},properties:{pp:null,pn:null,dupcont:null,dupStereo:null,cont:null,dup:null,owner:null,slice:null,peak:0,x01:0,y01:0,phSynth:0,fSynth0:0,xtp2:0,fSynth1:0,xtn2:0,refCount:0,f:0,x:0,y:0,ph:0,contF:0,m:0,m2:0,bJump:false,bSyncStereo:false,bConnected:false,bConnect:false,bDelete:false,bOwned:false,bMarked:false,bSplit:false,bMerge:false},initialize:function(s,j,o,b,v,t,n,r){var x=this;var g=MEPH.audio.sbsms.Util;x.refCount=0;x.dup=[];for(var u=0;u<3;u++){x.dup[u]=null}x.dupStereo=null;x.bJump=false;x.y01=0;x.pp=null;x.pn=null;x.bSyncStereo=false;x.bConnect=false;x.bConnected=false;x.bDelete=false;x.bOwned=false;x.bMarked=false;x.bSplit=false;x.bMerge=false;x.owner=null;x.slice=s;x.peak=j;var e=b[t-1];var c=b[t];var a=b[t+1];var u=(e+a-c-c);x.x=(u==0?t:t+0.5*(e-a)/u);var h=x.x;var w;var i;if(h<x.x){w=h+1;i=x.x-h}else{w=h-1;i=h-x.x}y=((1-i)*v[h]+i*v[w]);f=g.TWOPI*x.x/(n*(1<<r));var q=g.square(o[h][0])+g.square(o[h][1]);var m;if(q>0){m=Math.atan2(o[h][1],o[h][0])}else{m=0}var l;var p=g.square(o[w][0])+g.square(o[w][1]);if(p>0){l=Math.atan2(o[w][1],o[w][0])}else{l=0}m+=(h&1)*g.PI;l+=(w&1)*g.PI;if(i<0.5){l=m+g.canonPI(l-m)}else{m=l+g.canonPI(m-l)}ph=g.canon2PI((1-i)*m+i*l);phSynth=ph},absorb:function(){var a=this;if(a.pp&&a.pn){if(a.pp.y*a.peak[(a.pp.x-a.x)]>a.pn.y*a.peak[lrintf(a.pn.x-a.x)]){a.pp.m2+=a.m2}else{a.pn.m2+=a.m2}}else{if(a.pp){if(a.y01==0||y01*a.peak[lrintf(a.x01-a.x)]<a.pp.y*a.peak[lrintf(a.pp.x-a.x)]){a.pp.m2+=a.m2}}else{if(a.pn){if(a.y01==0||a.y01*a.peak[lrintf(a.x01-a.x)]<a.pn.y*a.peak[lrintf(a.pn.x-a.x)]){a.pn.m2+=a.m2}}}}},destroy:function(){},getF:function(){var a=this;return a.f},getM:function(){var a=this;return a.y},getPhase:function(){var a=this;return ph}});