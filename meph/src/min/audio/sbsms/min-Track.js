var PhShift=5;var WShift=21;var Ph1=65535;var WPI=536870912;var W2PI=1073741824;var W2PIMask=1073741823;var WScale=170891318.8941079;var MScale=4.656683928435187e-10;window.SynthMode={synthModeOutput:0,synthModeTrial2:1,synthModeTrial1:2};MEPH.define("MEPH.audio.sbsms.Track",{statics:{},properties:{point:null,h:0,jumpThresh:0,index:null,start:null,first:null,end:null,last:null,bEnd:null,bEnded:null,bRender:null,bStitch:null,bSplit:null,bMerge:null},initialize:function(b,a,f,e,d){var c=this;c.h=b;c.jumpThresh=0.00001*b;c.index=a;c.bEnd=false;c.bEnded=false;c.bRender=false;c.bSplit=false;c.bMerge=false;c.first=e;c.start=e;if(c.bStitch){c.bStitch=true}else{c.bStitch=false;if(c.start>0){c.start--}}c.point=c.point||[];if(f){c.point.push(f)}f.owner=this;f.refCount++;c.end=e;c.last=e},getIndex:function(){var a=this;return a.index},isFirst:function(b){var a=this;return(b==a.first)},isLast:function(b){var a=this;return(b==a.last)},size:function(){var a=this;return a.point.length},back:function(){var a=this;return a.point.last()},getTrackPoint:function(b){var a=this;return a.point[b-a.first]},getSBSMSTrackPoint:function(b){var a=this;return a.getTrackPoint(b)},jump:function(c,b){var a=this;if(a.tp1.m>a.tp0.m){var d=0.0001*dBApprox(c.m,b.m);return(d>a.jumpThresh)}else{return false}},updateFPH:function(g,o,r,u,s){var c=MEPH.audio.sbsms.Util;var v=this;if(g===v.start&&g<v.first){var e=v.getTrackPoint(g+1);e.fSynth1=Math.max(0,Math.min(6,s*e.f));e.fSynth0=e.fSynth1;e.phSynth=e.ph;if(o==SynthMode.synthModeOutput&&v.tp1.dupStereo){return e}}else{if(g==v.last){if(v.last<v.end){var f=v.getTrackPoint(g);f.fSynth0=f.fSynth1}}else{var f=v.getTrackPoint(g);var e=v.getTrackPoint(g+1);if(o==SynthMode.synthModeOutput){if(f.dupStereo&&e.dupStereo&&f.dupStereo.owner==e.dupStereo.owner){var q=e.ph-f.ph;var i=0.5*h*(f.f+e.f);var m=c.canonPI(q-i)/h;var x=e.dupStereo.ph-f.dupStereo.ph;var t=0.5*h*(f.dupStereo.f+e.dupStereo.f);var a=c.canonPI(x-t)/h;if(m>0.0013*(f.f+e.f)){m=0;a=0}else{if(a>0.0013*(f.dupStereo.f+e.dupStereo.f)){a=0}}var l=0.5*(f.f+f.dupStereo.f+m+a);var k=0.5*(e.f+e.dupStereo.f+m+a);var b=0.5*c.canonPI(q-x)/r;if(!(bSplit&&g==first)){f.fSynth0=Math.max(0,Math.min(6,u*(l+b)))}if(!(bMerge&&g+1==last)){e.fSynth1=Math.max(0,Math.min(6,s*(k+b)))}}else{var q=e.ph-f.ph;var i=0.5*h*(f.f+e.f);var m=c.canonPI(q-i)/h;if(m>0.0013*(f.f+e.f)){m=0}if(!(bSplit&&g==first)){f.fSynth0=Math.max(0,Math.min(6,u*(f.f+m)))}if(!(bMerge&&g+1==last)){e.fSynth1=Math.max(0,Math.min(6,s*(e.f+m)))}}if(!(f.bSplit||f.bMerge||e.bSplit||e.bMerge)&&v.jump(f,e)){e.bJump=true;if(f.dupStereo&&e.dupStereo){if(f.dupStereo.owner==e.dupStereo.owner){e.bSyncStereo=!v.jump(f.dupStereo,e.dupStereo)}}}if(!f.bSplit){if(f.bJump){if(f.bSyncStereo){f.phSynth=c.canon2PI(f.dupStereo.phSynth+f.ph-f.dupStereo.ph)}else{f.phSynth=f.ph}}}if(!(v.bMerge&&g+1==v.last)){var m=(e.fSynth1-f.fSynth0)/r;var j=f.fSynth0+0.5*m;var d=lrintf(j*WScale)/WScale;var p=lrintf(m*WScale)/WScale;e.phSynth=c.canon2PI(f.phSynth+r*d+((r*(r-1))>>1)*p)}}else{var q=e.ph-f.ph;var i=0.5*h*(f.f+e.f);var m=c.canonPI(q-i)/h;if(m>0.0013*(f.f+e.f)){m=0}if(!(v.bSplit&&g==v.first)){f.fSynth0=Math.max(0,Math.min(6,u*(f.f+m)));f.phSynth=f.ph}if(!(v.bMerge&&g+1==v.last)){e.fSynth1=Math.max(0,Math.min(6,s*(e.f+m)));e.phSynth=e.ph}}}}return null},updateM:function(d,e){var a=this;if(e==synthModeTrial2){if(d==a.first&&d==a.start){var c=a.getTrackPoint(d);c.m=(c.m2>0?Math.sqrt(c.m2):0)}if(d<a.last){var b=a.getTrackPoint(d+1);b.m=(b.m2>0?Math.sqrt(b.m2):0)}}},step:function(b){var a=this;if(b>a.first&&b<a.last){var c=a.point[b-first];c.destroy();a.point[b-a.first]=null}},push_back:function(b){var a=this;a.point.push(b);b.owner=this;b.refCount++;a.last++;a.end++},endTrack:function(a){if(a){this.bStitch=true}else{me.end++}me.bEnded=true},synth:function(D,l,y,v,F){var G=this;var d,b;var t,s;var p,o;var q;var B;if(l>=G.end){return}if(l<G.last){var j=G.getTrackPoint(l+1);s=j.fSynth1;b=j.m;o=j.phSynth;if(G.bMerge&&l+1==G.last){b=0}q=j.bJump;B=j.bJump}else{q=false;B=(G.last!=G.end)}if(l>=G.first){var k=G.getTrackPoint(l);t=k.fSynth0;d=k.m;p=k.phSynth;if(G.bSplit&&l==G.first){d=0}}else{q=true}if(B){var m=Math.min(y,t==0?384:Math.min(384,lrintf(Math.PI*4/t)));var A=d/m;var r=t;var z=D;var e=D+m;var H=lrintf(p*WScale);if(H>=W2PI){H-=W2PI}var g=lrintf(r*WScale);while(z!=e){if(g<WPI){var E=(H>>PhShift)&Ph1;var C=H>>WShift;z+=d*(synthTable1[C]+E*synthTable2[C])}z++;d-=A;H+=g;H&=W2PIMask}}if(q){var a=Math.min(y,s==0?384:Math.min(384,lrintf(Math.PI*3/s)));var A=b/a;var r=s;D+=y;var e=D-a;var H=lrintf(o*WScale);H&=W2PIMask;var g=lrintf(r*WScale);while(D!=e){D--;b-=A;H-=g;if(H<0){H+=W2PI}if(g<WPI){var E=(H>>PhShift)&Ph1;var C=H>>WShift;D+=b*(synthTable1[C]+E*synthTable2[C])}}}if(!(q||B)){var u=(s-t)/y;var r=t+0.5*u;var A=(b-d)/y;var H=lrintf(p*WScale);if(H>=W2PI){H-=W2PI}var g=lrintf(r*WScale);var x=lrintf(u*WScale);var e=D+y;while(D!=e){if(g<WPI){var E=(H>>PhShift)&Ph1;var C=H>>WShift;D+=d*(synthTable1[C]+E*synthTable2[C])}H+=g;g+=x;H&=W2PIMask;d+=A;D++}}},absorb:function(){var a=this;a.point.foreach(function(b){b.absorb()})}}).then(function(){window.synthTable1=[2147450880,2147319810,2146795530,2146009110,2144895015,2143387710,2141618265,2139521145,2137096350,2134343880,2131329270,2127921450,2124185955,2120188320,2115863010,2111144490,2106163830,2100921030,2095285020,2089321335,2083095510,2076542010,2069660835,2062451985,2054980995,2047182330,2039055990,2030667510,2021951355,2012907525,2003536020,1993902375,1984006590,1973783130,1963231995,1952418720,1941277770,1929874680,1918143915,1906151010,1893895965,1881313245,1868468385,1855361385,1841926710,1828229895,1814270940,1800049845,1785566610,1770755700,1755748185,1740412995,1724881200,1709021730,1692965655,1676581905,1660001550,1643159055,1626054420,1608753180,1591124265,1573364280,1555276620,1536992355,1518445950,1499702940,1480763325,1461561570,1442163210,1422502710,1402645605,1382591895,1362341580,1341829125,1321185600,1300279935,1279243200,1257944325,1236514380,1214887830,1193064675,1171044915,1148894085,1126546650,1104002610,1081327500,1058455785,1035453000,1012319145,988988685,965527155,941934555,918145350,894290610,870239265,846056850,821808900,797364345,772854255,748213095,723440865,698603100,673634265,648534360,623368920,598137945,572775900,547282785,521789670,496165485,470541300,444786045,418965255,393078930,367127070,341109675,315092280,289009350,262860885,236712420,210498420,184218885,158004885,131659815,105380280,79035210,52690140,26345070,0,-26345070,-52690140,-79035210,-105380280,-131659815,-158004885,-184218885,-210498420,-236712420,-262860885,-289009350,-315092280,-341109675,-367127070,-393078930,-418965255,-444786045,-470541300,-496165485,-521789670,-547282785,-572775900,-598137945,-623368920,-648534360,-673634265,-698603100,-723440865,-748213095,-772854255,-797364345,-821808900,-846056850,-870239265,-894290610,-918145350,-941934555,-965527155,-988988685,-1012319145,-1035453000,-1058455785,-1081327500,-1104002610,-1126546650,-1148894085,-1171044915,-1193064675,-1214887830,-1236514380,-1257944325,-1279243200,-1300279935,-1321185600,-1341829125,-1362341580,-1382591895,-1402645605,-1422502710,-1442163210,-1461561570,-1480763325,-1499702940,-1518445950,-1536992355,-1555276620,-1573364280,-1591124265,-1608753180,-1626054420,-1643159055,-1660001550,-1676581905,-1692965655,-1709021730,-1724881200,-1740412995,-1755748185,-1770755700,-1785566610,-1800049845,-1814270940,-1828229895,-1841926710,-1855361385,-1868468385,-1881313245,-1893895965,-1906151010,-1918143915,-1929874680,-1941277770,-1952418720,-1963231995,-1973783130,-1984006590,-1993902375,-2003536020,-2012907525,-2021951355,-2030667510,-2039055990,-2047182330,-2054980995,-2062451985,-2069660835,-2076542010,-2083095510,-2089321335,-2095285020,-2100921030,-2106163830,-2111144490,-2115863010,-2120188320,-2124185955,-2127921450,-2131329270,-2134343880,-2137096350,-2139521145,-2141618265,-2143387710,-2144895015,-2146009110,-2146795530,-2147319810,-2147450880,-2147319810,-2146795530,-2146009110,-2144895015,-2143387710,-2141618265,-2139521145,-2137096350,-2134343880,-2131329270,-2127921450,-2124185955,-2120188320,-2115863010,-2111144490,-2106163830,-2100921030,-2095285020,-2089321335,-2083095510,-2076542010,-2069660835,-2062451985,-2054980995,-2047182330,-2039055990,-2030667510,-2021951355,-2012907525,-2003536020,-1993902375,-1984006590,-1973783130,-1963231995,-1952418720,-1941277770,-1929874680,-1918143915,-1906151010,-1893895965,-1881313245,-1868468385,-1855361385,-1841926710,-1828229895,-1814270940,-1800049845,-1785566610,-1770755700,-1755748185,-1740412995,-1724881200,-1709021730,-1692965655,-1676581905,-1660001550,-1643159055,-1626054420,-1608753180,-1591124265,-1573364280,-1555276620,-1536992355,-1518445950,-1499702940,-1480763325,-1461561570,-1442163210,-1422502710,-1402645605,-1382591895,-1362341580,-1341829125,-1321185600,-1300279935,-1279243200,-1257944325,-1236514380,-1214887830,-1193064675,-1171044915,-1148894085,-1126546650,-1104002610,-1081327500,-1058455785,-1035453000,-1012319145,-988988685,-965527155,-941934555,-918145350,-894290610,-870239265,-846056850,-821808900,-797364345,-772854255,-748213095,-723440865,-698603100,-673634265,-648534360,-623368920,-598137945,-572775900,-547282785,-521789670,-496165485,-470541300,-444786045,-418965255,-393078930,-367127070,-341109675,-315092280,-289009350,-262860885,-236712420,-210498420,-184218885,-158004885,-131659815,-105380280,-79035210,-52690140,-26345070,0,26345070,52690140,79035210,105380280,131659815,158004885,184218885,210498420,236712420,262860885,289009350,315092280,341109675,367127070,393078930,418965255,444786045,470541300,496165485,521789670,547282785,572775900,598137945,623368920,648534360,673634265,698603100,723440865,748213095,772854255,797364345,821808900,846056850,870239265,894290610,918145350,941934555,965527155,988988685,1012319145,1035453000,1058455785,1081327500,1104002610,1126546650,1148894085,1171044915,1193064675,1214887830,1236514380,1257944325,1279243200,1300279935,1321185600,1341829125,1362341580,1382591895,1402645605,1422502710,1442163210,1461561570,1480763325,1499702940,1518445950,1536992355,1555276620,1573364280,1591124265,1608753180,1626054420,1643159055,1660001550,1676581905,1692965655,1709021730,1724881200,1740412995,1755748185,1770755700,1785566610,1800049845,1814270940,1828229895,1841926710,1855361385,1868468385,1881313245,1893895965,1906151010,1918143915,1929874680,1941277770,1952418720,1963231995,1973783130,1984006590,1993902375,2003536020,2012907525,2021951355,2030667510,2039055990,2047182330,2054980995,2062451985,2069660835,2076542010,2083095510,2089321335,2095285020,2100921030,2106163830,2111144490,2115863010,2120188320,2124185955,2127921450,2131329270,2134343880,2137096350,2139521145,2141618265,2143387710,2144895015,2146009110,2146795530,2147319810];window.synthTable2=[-2,-8,-12,-17,-23,-27,-32,-37,-42,-46,-52,-57,-61,-66,-72,-76,-80,-86,-91,-95,-100,-105,-110,-114,-119,-124,-128,-133,-138,-143,-147,-151,-156,-161,-165,-170,-174,-179,-183,-187,-192,-196,-200,-205,-209,-213,-217,-221,-226,-229,-234,-237,-242,-245,-250,-253,-257,-261,-264,-269,-271,-276,-279,-283,-286,-289,-293,-296,-300,-303,-306,-309,-313,-315,-319,-321,-325,-327,-330,-333,-336,-338,-341,-344,-346,-349,-351,-353,-356,-358,-360,-363,-364,-367,-369,-370,-373,-374,-376,-378,-379,-381,-383,-384,-385,-387,-389,-389,-391,-391,-393,-394,-395,-396,-397,-397,-398,-399,-399,-400,-401,-400,-402,-401,-402,-402,-402,-402,-402,-402,-402,-402,-401,-402,-400,-401,-400,-399,-399,-398,-397,-397,-396,-395,-394,-393,-391,-391,-389,-389,-387,-385,-384,-383,-381,-379,-378,-376,-374,-373,-370,-369,-367,-364,-363,-360,-358,-356,-353,-351,-349,-346,-344,-341,-338,-336,-333,-330,-327,-325,-321,-319,-315,-313,-309,-306,-303,-300,-296,-293,-289,-286,-283,-279,-276,-271,-269,-264,-261,-257,-253,-250,-245,-242,-237,-234,-229,-226,-221,-217,-213,-209,-205,-200,-196,-192,-187,-183,-179,-174,-170,-165,-161,-156,-151,-147,-143,-138,-133,-128,-124,-119,-114,-110,-105,-100,-95,-91,-86,-80,-76,-72,-66,-61,-57,-52,-46,-42,-37,-32,-27,-23,-17,-12,-8,-2,2,8,12,17,23,27,32,37,42,46,52,57,61,66,72,76,80,86,91,95,100,105,110,114,119,124,128,133,138,143,147,151,156,161,165,170,174,179,183,187,192,196,200,205,209,213,217,221,226,229,234,237,242,245,250,253,257,261,264,269,271,276,279,283,286,289,293,296,300,303,306,309,313,315,319,321,325,327,330,333,336,338,341,344,346,349,351,353,356,358,360,363,364,367,369,370,373,374,376,378,379,381,383,384,385,387,389,389,391,391,393,394,395,396,397,397,398,399,399,400,401,400,402,401,402,402,402,402,402,402,402,402,401,402,400,401,400,399,399,398,397,397,396,395,394,393,391,391,389,389,387,385,384,383,381,379,378,376,374,373,370,369,367,364,363,360,358,356,353,351,349,346,344,341,338,336,333,330,327,325,321,319,315,313,309,306,303,300,296,293,289,286,283,279,276,271,269,264,261,257,253,250,245,242,237,234,229,226,221,217,213,209,205,200,196,192,187,183,179,174,170,165,161,156,151,147,143,138,133,128,124,119,114,110,105,100,95,91,86,80,76,72,66,61,57,52,46,42,37,32,27,23,17,12,8,2];window.synthModeOutput=0;window.synthModeTrial2=1;window.synthModeTrial1=2});