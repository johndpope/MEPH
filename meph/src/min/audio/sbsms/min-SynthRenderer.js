MEPH.define("MEPH.audio.sbsms.SynthRenderer",{statics:{},alternateNames:["SBSMSRenderer","SampleBufBase"],properties:{channels:0,synthBuf:null,synthBufLength:null,sines:null,time:null,n:null},initialize:function(a,b){var d=this;d.synthBuf=[].interpolate(0,2,function(){return 0});d.synthBufLength=[].interpolate(0,2,function(){return 0});d.sines=[].interpolate(0,2,function(){return 0});d.time=[].interpolate(0,2,function(){return 0});d.n=[].interpolate(0,2,function(){return 0});var d=this;this.channels=a;for(var e=0;e<a;e++){d.sines[e]=[];d.synthBufLength[e]=b<<4;d.synthBuf[e]=[].zeroes(d.synthBufLength[e])}},destroy:function(){var b=this;var a=b.channels;for(var d=0;d<a;d++){delete b.sines[d]}},startTime:function(e,b,d){var a=this;if(d>a.synthBufLength[e]){a.synthBufLength[e]=d<<1;a.synthBuf[e]=[].zeros(synthBufLength[e])}this.n[e]=d;this.time[e]=b;a.synthBuf[e]=[].zeroes(d)},render:function(d,a){var b=this;a.synth(b.synthBuf[d],b.time[d],b.n[d],synthModeOutput,d)},endTime:function(h){var e=this;var g=Math.floor(this.n[h]);e.sines[h].grow(g);var d=Math.floor(e.sines[h].writePos);var b=e.sines[h].buf;var f=e.synthBuf[h];for(var a=0;a<g;a++){b[d++]+=e.src[a]}e.sines[h].writePos+=g},read:function(d,g){var e=this;g=Math.min(g,e.sines[0].nReadable());for(var f=1;f<e.channels;f++){g=Math.min(g,e.sines[f].nReadable())}for(var f=0;f<e.channels;f++){var b=e.sines[f].getReadBuf();for(var a=0;a<g;a++){d[a][f]=b[a]}e.sines[f].advance(g)}return g}});