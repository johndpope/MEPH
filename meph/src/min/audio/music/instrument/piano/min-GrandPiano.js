MEPH.define("MEPH.audio.music.instrument.piano.GrandPiano",{extend:"MEPH.audio.music.instrument.Instrument",requires:["MEPH.audio.Sequence","MEPH.graph.Graph","MEPH.audio.music.theory.Notes","MEPH.graph.Node","MEPH.audio.Constants","MEPH.audio.graph.node.AudioBufferSourceNode"],createSequence:function(){var a=this,b=new MEPH.audio.Sequence();a.resources().foreach(function(c){var h=MEPH.audio.Audio.GetSourceBuffer().first(function(j){return j.file===c.file});var f=new MEPH.audio.Sequence();var e=h.file.split(".");var d=h.file;var i=a.createPianoNoteGraph(h.id,d);f.setDefaultGraph(i.id);f.midiNote(MEPH.audio.music.theory.Notes.convertToMidi(c.key));var g="MEPH.audio.music.instrument.piano.mp3.";g=MEPH.getClassPath(g);f.title=d.split(g).last().split(".mp3").first();b.add(f,0)});b.title="Grand Piano";return b},createPianoNoteGraph:function(f,b){var d=new MEPH.graph.Graph(),c,e=new MEPH.audio.graph.node.AudioBufferSourceNode();c=new MEPH.graph.Node();c.setId(MEPH.GUID());e.id=MEPH.GUID();e.setNodeInputDefaultValue("source",f);c.appendData(e);c.data=e;d.addNode(c);var a=d.saveGraph();a.id=a.id||MEPH.GUID();a.name=b;e.destroy();MEPH.publish(MEPH.audio.Constants.AUDIO_GRAPH_SAVED,a);return a},getResourcesToLoad:function(){var b=this;var c="MEPH.audio.music.instrument.piano.mp3.";var a=[].interpolate(0,8,function(d){return{file:MEPH.getClassPath(c+"A"+d)+".mp3",key:"A"+d,type:"mp3"}}).concat([].interpolate(1,8,function(d){return{file:MEPH.getClassPath(c+"Ab"+d)+".mp3",key:"Ab"+d,type:"mp3"}})).concat([].interpolate(0,8,function(d){return{file:MEPH.getClassPath(c+"B"+d)+".mp3",key:"B"+d,type:"mp3"}})).concat([].interpolate(0,8,function(d){return{file:MEPH.getClassPath(c+"Bb"+d)+".mp3",key:"Bb"+d,type:"mp3"}})).concat([].interpolate(1,9,function(d){return{file:MEPH.getClassPath(c+"C"+d)+".mp3",key:"C"+d,type:"mp3"}})).concat([].interpolate(1,8,function(d){return{file:MEPH.getClassPath(c+"D"+d)+".mp3",key:"D"+d,type:"mp3"}})).concat([].interpolate(1,9,function(d){return{file:MEPH.getClassPath(c+"Db"+d)+".mp3",key:"Db"+d,type:"mp3"}})).concat([].interpolate(1,8,function(d){return{file:MEPH.getClassPath(c+"E"+d)+".mp3",key:"E"+d,type:"mp3"}})).concat([].interpolate(1,8,function(d){return{file:MEPH.getClassPath(c+"Eb"+d)+".mp3",key:"Eb"+d,type:"mp3"}})).concat([].interpolate(1,8,function(d){return{file:MEPH.getClassPath(c+"F"+d)+".mp3",key:"F"+d,type:"mp3"}})).concat([].interpolate(1,8,function(d){return{file:MEPH.getClassPath(c+"G"+d)+".mp3",key:"G"+d,type:"mp3"}})).concat([].interpolate(1,8,function(d){return{key:"Gb"+d,file:MEPH.getClassPath(c+"Gb"+d)+".mp3",type:"mp3"}}));return a.orderBy(function(d,e){return MEPH.audio.music.theory.Notes.convertToMidi(d.key)-MEPH.audio.music.theory.Notes.convertToMidi(e.key)})}});