MEPH.define("MEPH.audio.soundfont.chunks.data.DataChunk",{requires:["MEPH.audio.soundfont.chunks.samples.SamplesChunk","MEPH.audio.soundfont.chunks.data.PresetsSubchunk","MEPH.audio.soundfont.chunks.data.GeneratorsSubchunk","MEPH.audio.soundfont.chunks.data.BagsSubchunk","MEPH.audio.soundfont.chunks.data.InstrumentsSubchunk","MEPH.audio.soundfont.chunks.data.ModulatorsSubchunk","MEPH.audio.soundfont.chunks.data.SamplesSubchunk","MEPH.audio.soundfont.utils.SFByteArray"],extend:"MEPH.audio.soundfont.chunks.Chunk",statics:{DATA_TAG:"pdta",PRESET_TAG:"phdr",PRESET_BAG_TAG:"pbag",PRESET_MODULATOR_TAG:"pmod",PRESET_GENERATOR_TAG:"pgen",INSTRUMENT_TAG:"inst",INSTRUMENT_BAG_TAG:"ibag",INSTRUMENT_MODULATOR_TAG:"imod",INSTRUMENT_GENERATOR_TAG:"igen",SAMPLE_HEADER_TAG:"shdr",END_OF_SAMPLES_TAG:"EOS"},properties:{presetsSubchunk:undefined,presetBags:undefined,presetModulators:undefined,presetGenerators:undefined,instrumentsSubchunk:undefined,instrumentBags:undefined,instrumentModulators:undefined,instrumentGenerators:undefined,samplesSubchunk:undefined},initialize:function(a){this.callParent("DataChunk",a);this.nonSerializedProperties.push("numSamples")},getNumSamples:function(){return this.getSampleRecords().numRecords},getPresetRecords:function(){return this.presetsSubchunk.records},getInstrumentRecords:function(){return this.instrumentsSubchunk.records},getSampleRecords:function(){return this.samplesSubchunk.records},setSampleBytes:function(a){this.samplesSubchunk.setBytes(a.getBytes())},getSampleRecord:function(a){return this.samplesSubchunk.getSampleRecord(a)},parse:function(c){while(c.bytesAvailable()>7){this._format=c.readString(4);this._chunkSize=c.readDWord();var b=this._chunkSize;var a=this._format;switch(a){case DataChunk.PRESET_TAG:this.presetsSubchunk=new PresetsSubchunk(c,b);break;case DataChunk.PRESET_BAG_TAG:this.presetBags=new BagsSubchunk(c,b);break;case DataChunk.PRESET_MODULATOR_TAG:this.presetModulators=new ModulatorsSubchunk(c,b);break;case DataChunk.PRESET_GENERATOR_TAG:this.presetGenerators=new GeneratorsSubchunk(c,b);break;case DataChunk.INSTRUMENT_TAG:this.instrumentsSubchunk=new InstrumentsSubchunk(c,b);break;case DataChunk.INSTRUMENT_BAG_TAG:this.instrumentBags=new BagsSubchunk(c,b);break;case DataChunk.INSTRUMENT_MODULATOR_TAG:this.instrumentModulators=new ModulatorsSubchunk(c,b);break;case DataChunk.INSTRUMENT_GENERATOR_TAG:this.instrumentGenerators=new GeneratorsSubchunk(c,b);break;case DataChunk.SAMPLE_HEADER_TAG:this.samplesSubchunk=new SamplesSubchunk(c,b);break;case DataChunk.END_OF_SAMPLES_TAG:default:break}}this.updateSamplesAndPresets()},updateSamplesAndPresets:function(){this.instrumentsSubchunk.processGenerators(this.instrumentGenerators,this.instrumentBags);this.presetsSubchunk.processGenerators(this.presetGenerators,this.presetBags)}});