var window=window||self;if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){var workerthread=true}else{}var mephFrameWork=(function(I,F,J,aa){if(J){Promise=J}var s=function(al,ap){var ao=al.split(".");ap=ap||window;var an=null;for(var am=0;am<ao.length;am++){if(!ap[ao[am]]){an=ap;ap[ao[am]]={};ap=ap[ao[am]]}else{an=ap;ap=ap[ao[am]]}}return{previous:an,name:ao[am-1]}};var z;if(typeof I==="string"){z=s(I,aa);z=z.previous[z.name]}z.DebugMode=true;z.define=function(ao,am){var aq=l(ao),an=[],al=[],ar,ap=[],at;if(!aq){at=P(am);requiredTemplates=h(am,ao);if(at.length>0){an=at.where(function(au){return l(au)===null}).select(function(au){return{classifiedName:au,path:C(au)+p,type:y}})}if(requiredTemplates.length>0){al=requiredTemplates.where(function(au){return T(au)===null}).select(function(au){return{classifiedName:au,path:C(au)+a,type:R}})}ar=an.concat(al);if(ar.length>0){ap=z.Array(ar).select(function(au){return n(au)})}if(ap.length===0){ap.push(Promise.resolve())}return Promise.all(ap).then(function(au){return z.beforeResourceDefined(ao,au)}).then(function(au){var av=false;if(au.results&&au.results[0]){z.Array(au.results).where(function(ay){if(!ay||!ay.details){av=true}return ay&&ay.details}).select(function(ay){ay.details.template=ay.result;ay.details.alias=am.alias.toLowerCase();return ay.details}).foreach(function(ay){ad(ay);z.fire(z.events.definedClass+ay.classifiedName+ay.type,ay)})}else{if(au.results&&au.results[0]===undefined){av=true}}if(am.alias&&av){ad({template:null,alias:am.alias,classifiedName:ao})}var ax=v(am);var aw=s(ao);aw.previous[aw.name]=ax.extend(ao,am);z.fire(z.events.definedClass,ao);z.fire(z.events.definedClass+ao+y,ao);am.alternateNames=am.alternateNames&&Array.isArray(am.alternateNames)?am.alternateNames:(am.alternateNames?[am.alternateNames]:[]);Z({alias:am.alias?am.alias.toLowerCase():ao,alternateNames:am.alternateNames,classifiedName:ao,config:am});return l(ao)})}return Promise.resolve().then(function(){return aq})};z.undefine=function(am){var an=l(am),al;if(an){al=s(am);al.previous[al.name]=undefined}};var M=[];z.subscribe=function(am,an){var al=z.GUID();if(!Array.isArray(am)){am=[am]}am.foreach(function(ao){M.push({event:ao,func:an,reference:al})});return al};z.Log=function(al){console.log(al)};z.createClass=function(ap,ao,ar,an,aq){var am=z.getDefinedClass(ap),al,an=an||false;if(am){return Promise.resolve().then(function(){return am})}else{al={alias:ao,templates:an,extend:ar};z.applyIf(aq,al);return z.define(ap,al)}};z.unsubscribe=function(al){al=Array.isArray(al)?al:[al];z.Array(al).foreach(function(am){z.Array(M).removeWhere(function(an){return an===am||(an&&an.reference===am)})})};z.publish=function(am){var al=arguments;z.Array(M).where(function(an){return an.event===am}).foreach(function(an){try{an.func.apply(null,al)}catch(ao){z.Log(ao)}})};z.create=function(al){var am=l(al);if(am){return Promise.resolve().then(function(){return am})}else{return z.retrieveRequiredClass({classifiedName:al,path:C(al)+p,type:y}).then(function(){nodejs.log("wait for class to define "+am);am=l(al);if(am){nodejs.log("returning defined class "+am);return am}var an,ap=function(ar,aq){if(ar===aq){am=l(ar);an(am);z.removeListeners(z.events.definedClass,ap)}}.bind(z,al),ao=new Promise(function(ar,aq){an=ar});z.on(z.events.definedClass,ap,ap);return ao})}};z.requires=function(){var al=z.Array();for(i=0;i<arguments.length;i++){al.push(arguments[i])}return Promise.all(al.select(function(am){return z.create(am)}))};z.beforeResourceDefined=function(am,al){return{resourceName:am,results:al}};z.get=function(am,al){return new Promise(function(ap,ao){var an=new XMLHttpRequest();an.open("GET",am);an.onload=function(){if(an.status==200){ap(an.response)}else{ao(Error(an.statusText))}};an.onerror=function(){ao(Error("Network Error"))};an.send()})};var v=function(al){if(al.extend){return l(al.extend)||Class}return Class};z.namespace=function(al){s(al)};z.retrieveRequiredClass=function(al){var ap,ao,am=z.Array(X).contains(function(aq){return aq.type===z.events.definedClass+al.classifiedName+al.type}),an;if(R===al.type){an=T(al.classifiedName)}else{an=l(al.classifiedName)}ap=new Promise(function(ar,aq){ao=ar});if(an){ao();return ap.then(function(){return an})}else{if(am){z.on(z.events.definedClass+al.classifiedName+al.type,function(){z.un(z.events.definedClass+al.classifiedName+al.type,al);ao.apply(al,arguments)},al);return ap}else{if(al.type===y){z.on(z.events.definedClass+al.classifiedName+al.type,function(){z.un(z.events.definedClass+al.classifiedName+al.type,al);ao.apply(al,arguments)},al);z.loadJSCssFile(al.path,y,function(){nodejs.log("loaded class ")}).then(function(){nodejs.log("fire class retrieval event");z.fire(ai+al.path,{})});return ap}else{return z.get(al.path).then(function(aq){return{result:aq,details:al}})}}}};var n=z.retrieveRequiredClass;z.getClassPath=function(am){var al=K.max(function(ao){if(am.startsWith(ao.prefix)){return ao.prefix.length}return -1}),an;an=al.prefix.length+E.length;classPath=am.substring(an,am.length).split(".").join(L);return al.path+L+classPath};z.getSource=function(al,an){var am=z.getClassPath(al);return z.get(am+an)};z.emptyFunction=function(){};z.ajax=function(ap,al){var ao,an,aq=new Promise(function(at,ar){ao=at;an=ar});al=al||{};al=z.applyIf({method:"GET",async:true,requestHeaders:[]},al);var am=new XMLHttpRequest();al.requestHeaders.push({header:"Cache-Control",value:"no-cache"});if(!al.requestHeaders.some(function(ar){return ar.header==="Authorization"})&&z.getAuthorizationToken()){al.requestHeaders.push({header:"Authorization",value:"Bearer "+z.getAuthorizationToken()})}am.onreadystatechange=function(){if(am.readyState==4&&am.status==200){ao({responseText:am.responseText})}else{if(am.readyState==4){switch(status){default:an({status:status,path:ap,configuration:al});break}}}};am.onerror=function(){};am.addEventListener("error",function(){},false);am.open(al.method,ap,al.async);z.Array(al.requestHeaders).foreach(function(ar){am.setRequestHeader(ar.header,ar.value)});am.send();return aq};var U;z.setAuthorizationToken=function(al){U=al};z.getAuthorizationToken=function(){return U};z.requestAuthentication=function(az,am,av,ax,at,an,ao){az=az||"http://localhost:52154/OAuth/Authorize";ax=ax||"agresso";ao=ao||"secret";at=at||"token";an=an||"state";am=am||"AgressoMobile";var ar={};ar.method="OPTIONS";var aq=z.addQueryString(az+"",{client_id:am?am:"Demo",redirect_uri:av,state:an,scope:ax,client_secret:ao,response_type:at});var al,ay=new Promise(function(aB,aA){al=aB;tofail=aA});try{var au=z.createIframe(aq)}catch(aw){alert(aw);if(aw&&aw.message){alert(aw.message)}}var ap=setInterval(function(){try{if(au&&au.contentWindow.location){var aB={},aD=au.contentWindow.location.hash,aA=MEPH.Array(aD.split("&")).select(function(aE){return{key:aE.split("=")[0],value:aE.split("=")[1]}}).foreach(function(aE){aB[aE.key.replace("#","")]=aE.value});if(aB.access_token){al(aB);au.parentNode.removeChild(au);clearInterval(ap)}}}catch(aC){}},100);return ay};z.createIframe=function(am){var al=document.createElement("iframe");al.setAttribute("src",am);al.classList.add("u4-iframe");document.body.appendChild(al);return al};z.createWindow=function(al){var am=window.open(al||"","_blank","location=yes");alert("myWindow "+am);am.document.write("<p>This window's name is: "+am.name+"</p>");return am};z.addQueryString=function(ap,ao){var am=(ap.indexOf("?")==-1)?"?":"&";for(var al in ao){var an=ao[al];ap+=am+encodeURIComponent(al)+"="+encodeURIComponent(an);am="&"}return ap};z.IsEventable=function(al){if(al&&al[S+"listeners"]){return true}return false};z.preflight=function(am,al){al=al||{};al.method="OPTIONS";return z.ajax(am,al)};z.ajaxJSON=function(am,al){return z.ajax(am,al).then(function(an){try{var ap=JSON.parse(an.responseText);an.responseJSON=ap;return an}catch(ao){an.responseText=an.responseText.replace(/\"/g,"'");an.responseText=an.responseText.replace(/'/g,'"');an.responseJSON=JSON.parse(an.responseText);return an}})};z.loadJSCssFile=function(al,ap,aw,am,au){aw=aw||z.emptyFunction;var av,aq,ay=new Promise(function(aA,az){aq=az;av=aA});if(ap==y){if((!document)||((document)&&!document.getElementsByTagName)){importScripts(al);setTimeout(function(){try{aw();av()}catch(az){console.log("something went wrong")}},1)}else{var at=document.getElementsByTagName("head")[0];var ar=document.createElement("script");ar.type="text/javascript";ar.onreadystatechange=function(){if(this.readyState=="complete"){aw()}};if(am){for(var an in am){ar.setAttribute(an,am[an]||"")}}if(au){ar.innerHTML=au}ar.onload=aw;ar.src=al;at.appendChild(ar)}av(al,ap)}else{if(ap==="mp3"||ap==="audio"){var ao=new XMLHttpRequest();ao.open("GET",al,true);ao.responseType="arraybuffer";ao.onload=function(){av({response:ao.response})};ao.onerror=function(){toFail({error:new Error("AudioSampleLoader: XMLHttpRequest called onerror")})};ao.send()}else{if(ap=="css"){var ax=document.createElement("link");ax.setAttribute("rel","stylesheet");ax.setAttribute("type","text/css");ax.setAttribute("href",al)}}}if(typeof ax!="undefined"){document.getElementsByTagName("head")[0].appendChild(ax)}return ay};z.loadScript=function(al){var am;var an=new Promise(function(ap,ao){am=ap});z.loadJSCssFile(al,y,function(){am.apply(this,arguments)});return an};z.loadScripts=function(al){var am=0;var an=Promise.resolve();for(am=0;am<al.length;am++){an=an.then(function(){return z.loadScript(al[this])}.bind(am))}return an};z.namespace("MEPH.Loader");MEPH.Loader.loadScript=z.loadScript;MEPH.Loader.loadScripts=z.loadScripts;var Q=[],E=".",ai="onRetrival",L="/",a=".html",p=".js",C=z.getClassPath,R=".html.template",y=".js",K=[],o=" ",u=o+"j",O=[],j=[],m=[],w="data-bind",Y="data-push",g="data-events",d=o+"listeners",H=o+"domlisteners",ag="data-reference",f="$",aj="$",ah="-",W="|",c=".",x=o+"isObservable",r=o+"isValidatable",b=[{type:"control",shortCut:"c$"},{type:"control",shortCut:"control"},{type:"view",shortCut:"v$"},{type:"view",shortCut:"view"},{type:"subcontrol",shortCut:"s$"},{type:"parentcontrol",shortCut:"pc$"},{type:"html",shortCut:"html"},{type:"presenter",shortCut:"p$"},{type:"presenter",shortCut:"presenter"},{type:"viewmodel",shortCut:"vm$"},{type:"viewmodel",shortCut:"viewmodel"},{type:"model",shortCut:"m$"},{type:"model",shortCut:"model"},{type:"controller",shortCut:"controller"},{type:"self",shortCut:"self"},{type:"controller",shortCut:"ct$"}];z.patternTypes=["presenter","controller","view","model","viewmodel"];z.templateType=R;z.folderPathSeparator=L;z.privatePropertyPrefix=f;z.defaultEventPrefix=g;z.listenersPropertyKey=d;z.nonEnumerablePropertyPrefix=o;z.isObservablePropertyKey=x;z.isValidatablePropertyKey=r;z.connectableTypes=b;z.dataObjectReferenceAttribute=ag;z.bindPrefixDelimiter=ah;z.defaultDataBindString=w;z.defaultReversePrefix=Y;z.pathDelimiter=c;z.pipeString=W;z.MaxTransitionTime=500;z.ParameterDelimiter=",";z.jsync=u;z.prefixes={retrievalEventPrefix:ai,templatePostFix:a};z.paths=K;z.setPath=function(am,al){z.Array(z.paths);if(z.paths.length>0){z.paths.removeWhere(function(an){return an.prefix===al})}z.paths.push({path:am,prefix:al})};z.setInterval=function(){return setInterval.apply(null,arguments)};z.getPath=function(al){z.Array(K);var am=K.first(function(an){return an.prefix===al});if(am){return am.path}return null};z.addBindPrefixShortCuts=function B(an,am){var al=Q.some(function(ao){return ao.prefix===an});if(!al){Q.push({prefix:an,type:am})}};z.getBindPrefixShortCuts=function(){return z.Array(Q)};z.getBindPrefixShortCut=function(al){return z.getBindPrefixShortCuts().first(function(am){return am.prefix===al})};z.addDataBindPrefix=function(am){var al=z.Array(O).some(function(an){return an===am});if(!al){O.push(am)}};z.removeDataBindPrefix=function(al){return z.Array(O).removeWhere(function(am){return am===al})};z.addReverseDataBindPrefx=function(am){var al=j.some(function(an){return an===am});if(!al){j.push(am)}};z.addEventDataBindingPrefixes=function(am){var al=m.some(function(an){return an===am});if(!al){m.push(am)}};z.getEventDataBindingPrefixes=function(){return z.Array(m.concat([g]))};z.removeEventDataBindingPrefix=function(am){var al=m.some(function(an){return an===am});if(al){m.removeWhere(function(an){return an===am})}};z.removeReverseDataBindPrefix=function(al){return z.Array(j).removeWhere(function(am){return am===al})};z.getReverseDataBindingPrefixes=function(){return z.Array(j.concat([Y]))};z.getDataBindPrefixes=function(){return z.Array(O.concat([w]))};z.equals=function G(am,an){for(var al in am){if(am[al]!==an[al]){return false}}for(var al in an){if(am[al]!==an[al]){return false}}return true},z.createEvent=function N(an,al){var ao,am;if(document.createEvent){ao=document.createEvent("Event");ao.initEvent(an,true,true);for(am in al){if(al.hasOwnProperty(am)){ao[am]=al[am]}}}else{ao=new Event(an);for(am in al){if(al.hasOwnProperty(am)){ao[am]=al[am]}}}return ao};z.getRequiredClasses=function(al){if(al.extend||(al.requires)){var ao=z.Array(((al.extend?[al.extend]:[]).concat(al.requires||[])));var an=[];for(var am=0;am<ao.length;am++){if(ao[am]){an.push(ao[am])}}return an}return[]};var P=z.getRequiredClasses;z.getRequiredTemplates=function(am,an){var al;if((am.templates&&am.templates.length>0)){al=z.Array(am.templates).where(function(ao){return ao})}else{if(am.templates===true){al=z.Array([an])}else{al=[]}}if(am.scripts&&am.scripts.length){am.scripts.foreach(function(ao){al.push(ao)})}return al};var h=z.getRequiredTemplates;z.Array=function(al){al=al||[];if(MEPH&&MEPH.util&&MEPH.util.Array){MEPH.util.Array.create(al)}return al};z.createTemplateNode=function(al){var am=ak(al);return{alias:am.alias,node:document.createElement(am.alias)}};z.Convert=function(al){if(MEPH&&MEPH.util&&MEPH.util.Array){return MEPH.util.Array.convert(al)}return al};z.IsObject=function(al){if((typeof al==="object")&&(al!==null)&&!Array.isArray(al)&&!(t(al)||ae(al))){return true}return false};function t(al){return(typeof Node==="object"?al instanceof Node:al&&typeof al==="object"&&typeof al.nodeType==="number"&&typeof al.nodeName==="string")}function ae(al){return(typeof HTMLElement==="object"?al instanceof HTMLElement:al&&typeof al==="object"&&al!==null&&al.nodeType===1&&typeof al.nodeName==="string")}z.getDefinedClass=function(al,ao){var an=al.split(".");var ao=ao||window;for(var am=0;am<an.length;am++){if(ao[an[am]]===null||ao[an[am]]===undefined){return null}else{ao=ao[an[am]]}}return ao};z.getPathValue=z.getDefinedClass;z.setPathValue=function(aq,ap,ao){var al=ap.split(".");var an=null;for(var am=0;am<al.length;am++){if(!aq||!z.mephHasOwnProperty(aq,al[am])&&(al.length-1>am)){return false}else{an=aq;aq=aq[al[am]]}}if(an){an[al[am-1]]=ao}return true};z.mephHasOwnProperty=function(an,am){var al;if(an.hasOwnProperty(am)){return true}for(al in an){if(am===al){return true}}return false};z.apply=function(an,am){var al;for(al in an){if(z.mephHasOwnProperty(an,al)){am[al]=an[al]}}return am};z.applyIf=function(an,am){var al;for(al in an){if(z.mephHasOwnProperty(an,al)&&!z.mephHasOwnProperty(am,al)){am[al]=an[al]}}return am};var e=[];z.getDefinedTemplate=function(al){return z.Array(e).first(function(am){return am.classifiedName===al})};z.getTemplates=function(){return e.select()};z.getTemplateByAlias=function(al){return z.Array(e).first(function(am){return am.alias===al})};z.getAllAliases=function(al){return z.Array(e).select(function(am){return am.alias}).where(function(am){return am})};z.getTemplateByNode=function(am){var al=am.nodeName.toLowerCase();return V(al)};var V=z.getTemplateByAlias;var T=z.getDefinedTemplate;z.getTemplate=function(al){return T(al)||V(al)};var ak=z.getTemplate;z.addTemplateInformation=function(am){var an=T(am.classifiedName);if(!an){var al=z.getTemplateByAlias(am.alias);if(al){am.alias=null}e.push(am);z.fire(z.events.definedTemplate,am)}};var ad=z.addTemplateInformation;var q=[];z.addDefinedClassInformation=function(al){var am=D(al.alias);if(!am){z.Array(al.alternateNames).foreach(function(an){var ao=s(an);ao.previous[ao.name]=l(al.classifiedName)});q.push(al)}};var Z=z.addDefinedClassInformation;z.getDefinedClasses=function(){return q.select(function(al){return al})};z.cancelBubble=function(am){var al=am?am:window.event;if(al.stopPropagation){al.stopPropagation()}if(al.cancelBubble!=null){al.cancelBubble=true}};z.getDefinedClassInformation=function(al){return z.Array(q).first(function(am){return am.alias===al||am.classifiedName===al||am.alternateNames.some(function(an){return an===al})})};z.generateCustomVisualStudioTags=function(){var am="\r\n";var al='<xsd:group name="flowContent">'+am+"\t\t<xsd:choice>"+am;z.Array(q).where(function(an){return an.alias}).select(function(an){if(an.alias.indexOf(".")===-1&&an.alias.indexOf("-")===-1){al+='\t\t\t<xsd:element ref="'+an.alias+'" />'+am}});al+="\t\t</xsd:choice>"+am;al+="</xsd:group>"+am;z.Array(q).where(function(an){return an.alias}).select(function(an){if(an.alias.indexOf(".")===-1&&an.alias.indexOf("-")===-1){al+='\t\t\t<xsd:element name="'+an.alias+'" type="simpleFlowContentElement" />'+am}});return al};var D=z.getDefinedClassInformation;z.removeTemplateInformation=function(al){var am=ak(al);return z.Array(e).removeWhere(function(an){return an===am})};var af=z.removeTemplateInformation;z.clone=function(ap,ao){ao=ao||[];if(null==ap||"object"!=typeof ap){return ap}if(ap instanceof Date){var aq=new Date();aq.setTime(ap.getTime());return aq}if(ap instanceof String){return ap}if(ap instanceof Number){return ap}if(ap instanceof Array){var aq=[];for(var an=0,am=ap.length;an<am;an++){aq[an]=A(ap[an])}return aq}if(ap instanceof Object){var aq={};for(var al in ap){if(!ao.some(function(ar){return ar===al})){if(ap.hasOwnProperty(al)){aq[al]=A(ap[al])}}}return aq}throw new Error("Unable to copy obj! Its type isn't supported.")};var A=z.clone;z.GUID=function(){var al="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ao){var an=Math.random()*16|0,am=ao=="x"?an:(an&3|8);return am.toString(16)});return al};z.Events=function(al){if(al[S+"listeners"]){return}Object.defineProperty(al,d,{enumerable:false,configurable:false,writeable:true,get:function(){return this[S+"listeners"]}.bind(al)});Object.defineProperty(al,H,{enumerable:false,configurable:false,writeable:true,get:function(){return this[S+"domlisteners"]}.bind(al)});Object.defineProperty(al,S+"listeners",{enumerable:false,configurable:false,writeable:true,value:[]});Object.defineProperty(al,S+"domlisteners",{enumerable:false,configurable:false,writeable:true,value:[]});Object.defineProperty(al,S+"setProperty",{enumerable:false,writable:false,configurable:false,value:function(an,am){this[S+an]=am}});Object.defineProperty(al,"_pause",{enumerable:false,writable:false,configurable:false,value:function(am){if(am){var an=this[S+"context_paused"].first(function(ao){return ao.context===am});if(!an){an={context:am,paused:0};this[S+"context_paused"].push(an)}an.paused++}else{this[S+"paused"]++}}});Object.defineProperty(al,"is_paused",{enumerable:false,writable:false,configurable:false,value:function(am){if(am){var an=this[S+"context_paused"].first(function(ao){return ao.context===am});if(an){return an.paused}else{return false}}return this[S+"paused"]}});Object.defineProperty(al,S+"paused",{enumerable:false,writable:true,configurable:false,value:0});Object.defineProperty(al,"_start",{enumerable:false,writable:false,configurable:false,value:function(am){if(am){var an=this[S+"context_paused"].first(function(ao){return ao.context===am});if(!an){an={context:am,paused:0};this[S+"context_paused"].push(an)}an.paused--;if(an.paused<0){an.paused=0}}else{this[S+"paused"]--;if(this[S+"paused"]<0){this[S+"paused"]=0}}}});Object.defineProperty(al,S+"context_paused",{enumerable:false,writable:true,configurable:false,value:[]});Object.defineProperty(al,"don",{enumerable:false,configurable:true,writeable:true,value:function(ap,at,ar,an,ao){var am;if(!Array.isArray(at)){am=[at]}else{am=at}var aq=this;am.foreach(function(au){au.addEventListener(ap,ar);z.Array(aq[H]).push({type:ap,dom:au,func:ar,reference:an||aq,capture:ao||false})})}.bind(al)});Object.defineProperty(al,"dun",{enumerable:false,configurable:true,writeable:true,value:function(am,an,ap,ao){if(arguments.length===0){am=this}z.Array(this[H]).removeWhere(function(aq){if(ao&&an){return aq.func=ao&&an===aq.type}else{if(ao){return aq.func=ao}else{if(am&&an){return aq.type===an&&am===aq.reference}else{if(an){return aq.type===an}else{if(am){return aq.reference===am}}}}}return true}).foreach(function(aq){aq.dom.removeEventListener(aq.type,aq.func,aq.capture)})}.bind(al)});Object.defineProperty(al,"on",{enumerable:false,configurable:true,writeable:true,value:function(ao,ap,am,an){z.Array(this[d]).push({type:ao,func:ap,pausekey:an||null,reference:am||this});return this}.bind(al)});Object.defineProperty(al,"hasOn",{enumerable:false,configurable:true,writeable:true,value:function(an,am){return z.Array(this[d]).contains(function(ao){if(am&&an){return ao.type===an&&am===ao.reference}else{if(an){return ao.type===an}else{if(am){return ao.reference===am}}}return true})}.bind(al)});Object.defineProperty(al,"onIf",{enumerable:false,configurable:true,writeable:true,value:function(an,am){if(!this.hasOn(an,am)){this.on(an,am)}}});Object.defineProperty(al,"un",{enumerable:false,configurable:true,writeable:true,value:function(an,am){z.Array(this[d]).removeWhere(function(ao){if(am&&an){return ao.type===an&&am===ao.reference}else{if(an){return ao.type===an}else{if(am){return ao.reference===am}}}return true})}.bind(al)});Object.defineProperty(al,"fire",{enumerable:false,configurable:false,writable:true,value:function(an){var am=z.Convert(arguments);if(this.is_paused()){return this}z.Array(this[d]).where(function(ao){return ao.type===an}).where(function(ao){if(ao.reference&&ao.reference.is_paused&&ao.pausekey){return !ao.reference.is_paused(ao.pausekey)}return true}).foreach(function(ao){try{ao.func.apply(ao.reference||null,am)}catch(ap){z.Log(ap)}});return this}.bind(al)});return al};var A=z.clone;var l=z.getDefinedClass;var S=" $ ";(function(){var al=false,an=/xyz/.test(function(){xyz})?/\b_great\b/:/.*/;this.Class=function(){};var am=function(ao){var ap={};for(var aq in ao.prototype){if(ao.prototype.hasOwnProperty(aq)){ap[aq]=ao.prototype[aq]}}return ap};Class.extend=function(az,aq){var aD=this.prototype;al=true;var aB=new this();al=false;var ay={};aB.mixins=aB.mixins||aD.mixins||{};if(aq.mixins&&!Array.isArray(aq.mixins)){for(var aE in aq.mixins){if(aq.mixins.hasOwnProperty(aE)){ay[aE]=aq.mixins[aE]}}}else{if(aq.mixins&&Array.isArray(aq.mixins)){z.Array(aq.mixins);aq.mixins.foreach(function(aI){var aG=l(aI);if(aG){var aH=am(aG);for(var aJ in aH){if(aJ==="requires"||aJ==="statics"||aJ==="constructor"||aJ==="extend"||aJ==="templates"||aJ==="scripts"||aJ==="mixins"||aJ==="observable"||aJ==="properties"){continue}aB[aJ]=aH[aJ]}}})}}for(var aE in ay){var aF=l(ay[aE]);if(aF&&aF.prototype){var ar=am(aF);aB.mixins[aE]=ar}}for(var ap in aq){if(ap==="requires"||ap==="statics"||ap==="extend"||ap==="templates"||ap==="mixins"||ap==="scripts"||ap==="observable"||ap==="properties"){continue}aB[ap]=typeof aq[ap]=="function"&&typeof aD[ap]=="function"&&an.test(aq[ap])?(function(aG,aH){return function(){var aJ=this.callParent;this.callParent=aD[aG];var aI=aH.apply(this,arguments);this.callParent=aJ;return aI}})(ap,aq[ap]):aq[ap];if(typeof aB[ap]=="function"){var aw=typeof aq[ap]==="function"&&typeof aD[ap]==="function";var aA=false;if(!aw){if((aq.requires||[]).all(function(aG){return new RegExp(aG.split(".").last()).test(aq[ap])})){aA=true}}if(!aA){aB[ap]=(function(aG,aK,aJ,aI,aH){return function(){var aU=1;var aT={};var aP={};var aS=aJ.slice().concat(aH.slice()).concat(az.slice());if(aI){var aM=this.callParent;this.callParent=aD[aG];var aR=arguments;this.great=function(){return aD[aG].apply(this,aR)}}MEPH.Array(aS).foreach(function(aX,aW){var aZ=l(aS[aW]);var aY=aS[aW].split(".");var aV=aY[aY.length-1];aT[aV]=window[aV];aP[aS[aW]]=window[aS[aW]];window[aV]=aZ;window[aS[aW]]=aZ});try{var aO=aK.apply(this,arguments)}catch(aN){var aQ=aN;if(!(aN instanceof Error)){aN=new Error(aN)}if(z.DebugMode){console.log(aN.stack)}throw aQ}finally{for(var aL in aT){window[aL]=aT[aL]}for(var aL in aP){window[aL]=aP[aL]}if(aI){this.callParent=aM}}return aO}})(ap,aq[ap],aq.requires||[],aw,aq.extend||[])}else{aB[ap]=aq[ap]}}}if(aq.templates){var aC=aq.templates===true?[az]:aq.templates;aB.templates=aD.templates?aD.templates.concat(aC):aC}if(aq.injections){var at=aq.injections?aq.injections:[];aB.injections=aD.injections?aD.injections.concat(at):at}if(aq.scripts){var av=aq.scripts===true?[az]:aq.scripts;aB.scripts=aD.scripts?aD.scripts.concat(av):av}if(aq.properties){aq.properties.____type=az}if(aq.properties){for(var ax in aq.properties){aB[ax]=A(aq.properties[ax])}}if(aq.observable){var au=[];for(var ax in aq.observable){aB[ax]=A(aq.observable[ax]);au.push(ax)}aB.$__observables=aB.$__observables||[];au.foreach(function(aG){if(!aB.$__observables.contains(function(aH){return aG==aH})){aB.$__observables.push(aG)}})}function ao(){if(!this.$window){Object.defineProperty(this,"$window",{enumerable:false,writeable:true,configurable:true,get:function(){return window}})}this.____type=az;if(!al&&this.initialize){this.initialize.apply(this,arguments)}}ao.prototype=aB;ao.prototype.constructor=ao;ao.extend=arguments.callee;if(aq.statics){for(var ax in aq.statics){ao[ax]=aq.statics[ax]}}return ao}})();z.events={frameworkReady:"frameworkReady",definedClass:"definedClass",definedTemplate:"definedTemplate"};z.listeners=z.listeners||[];var X=z.listeners;z.on=function(am,an,al){z.listeners.push({type:am,func:an,scope:al})};z.fire=function(am,al){z.Array(z.listeners).filter(function(an){return an.type===am}).forEach(function(an){an.func.apply(an.scope,z.Array([al]))})};z.removeListeners=function(am,al){z.listeners.removeWhere(function(an){if(am&&al){return an.type==am&&an.scope===al}else{if(al){return an.scope===al}else{if(am){return an.type==am}}}return true})};z.un=z.removeListeners;var ac;var ab;z.ready=function(){if(ab){return ab}ab=new Promise(function(am,al){ac=am}).then(function(){z.Array(z.connectableTypes).foreach(function(al){z.addBindPrefixShortCuts(al.shortCut,al.type)})}).then(function(){try{z.mouse=z.mouse||{position:{x:0,y:0}};z.workerthread=workerthread;if(!workerthread){document.body.addEventListener("mousemove",function(am){if(MEPH.util&&MEPH.util.Dom){z.mouse.position=MEPH.util.Dom.getScreenEventPositions(am).first()}})}}catch(al){}});return ab};z.on(z.events.definedClass,function(al){if(l("util.Array",z)){z.fire(z.events.frameworkReady);z.removeListeners(z.events.definedClass,z)}},z);z.on(z.events.frameworkReady,function(){ac()});var k=null;if(l("util.Array",z)){z.fire(z.events.frameworkReady)}else{z.requiredFiles=[F+"/util/String.js",F+"/util/Array.js",F+"/util/Dom.js",F+"/util/Template.js",F+"/util/Observable.js"];k=z.loadScripts(z.requiredFiles)}z.frameWorkPath=F;z.frameWorkPathSource=F+"/meph.js";z.addEventDataBindingPrefixes("meph-event");z.addDataBindPrefix("meph-data");return{framework:z,promise:k}});if(self){self.onmessage=function(oEvent){switch(oEvent.data.func){case"start":eval(oEvent.data.src);break;case"import":importScripts(oEvent.data.src);postMessage({success:true});break;case"load":self[oEvent.data.framework].requires(oEvent.data.script).then(function(){postMessage({success:true})});break;case"exec":Promise.resolve().then(function(){eval("var work = "+oEvent.data.work);return work.apply(null,oEvent.data.args||[])}).then(function(result){postMessage(result)});break}}}var exports=exports||null;var nodejs={log:function(){}};if(exports){var vm=require("vm");window=global;var document=null;nodejs.log=function(){console.log(arguments)};exports.mephFrameWork=mephFrameWork};