MEPH.define("MEPH.identity.IdentityProvider",{requires:[],properties:{promise:null,$registeredProviders:null,options:null,providers:null,isReady:false},initialize:function(a){var b=this;MEPH.Events(b);b.providers=a.providers;b.promise=Promise.resolve()},getProviders:function(){var a=this;return a.$registeredProviders},getNameSources:function(b){var a=this;return a.get("name",b)},get:function(c,b){var a=this;return a.ready().then(function(d){return d.select(function(e){return e.p.property(c)})}).then(function(d){d.foreach(function(e){e.then(function(f){b.removeWhere(function(g){return g.provider===f.provider});if(f.value!==null&&f.value!==undefined){f.label=f.value+" ("+f.type+")";b.push(f)}})})})},ready:function(){var a=this;if(a.readypromise){return a.readypromise}a.readypromise=(Promise.resolve().then(function(b){if(a.$registeredProviders&&a.$registeredProviders.length){return a.$registeredProviders}return Promise.all(a.providers.select(function(c){return MEPH.create(c.type).then(function(d){var e=new d(c.args);return e.ready().then(function(f){return{p:e,type:c.type,key:f}})})}))}).then(function(b){a.$registeredProviders=b;a.fire("isready",{isready:true});return a.$registeredProviders}));return a.readypromise}});