MEPH.define("MEPH.input.Dropdown",{alias:"dropdown",extend:"MEPH.field.FormField",requires:["MEPH.util.Dom"],templates:true,properties:{source:null,labelfield:"label",valuefield:"value"},initialize:function(){var a=this;a.callParent.apply(a,arguments);a.on("altered",a.onAltered.bind(a))},onAltered:function(b,a){var c=this;if(a.path==="source"||a.property==="source"){if(a&&a.old&&a.old.un){a.old.un(a.old)}if(c.source&&c.source.isObservable){c.source.on("changed",function(){c.updateselectDom()},c.source)}c.updateselectDom()}},updateselectDom:function(){var a=this;if(a.selectDom){a.selectDom.options.length=0;if(a.source&&Array.isArray(a.source)&&a.source.length){a.source.foreach(function(b){MEPH.util.Dom.addOption(b[a.labelfield],b[a.valuefield],a.selectDom)})}}},onLoaded:function(){var a=this;a.great();a.updateselectDom()},addTransferables:function(){var b=this,a=MEPH.Array(["value"]);b.callParent.apply(b,arguments);a.foreach(function(c){b.addTransferableAttribute(c,{object:b,path:c})})}});